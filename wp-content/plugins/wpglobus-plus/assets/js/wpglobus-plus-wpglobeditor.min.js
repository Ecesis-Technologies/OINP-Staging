!function(i){"use strict";var d={option:{mode:"table"},order:{},filterClass:"",init:function(e){d.option=i.extend(d.option,e),void 0!==WPGlobusPlusEditor.mode&&"ueditor"==WPGlobusPlusEditor.mode&&(d.option.mode=WPGlobusPlusEditor.mode),"table"==d.option.mode?(d.filterClass=i('input[name="wpglobeditor-page-filter-class"]').val(),this.attachListeners()):"undefined"!=typeof WPGlobusDialogApp&&setTimeout(function(){i.each(WPGlobusPlusEditor.elements,function(e,o){WPGlobusDialogApp.addElement(o)})},3e3)},attachListeners:function(){i(document).on("click",".wpglobus-plus-wpglobeditor-filter-button",function(e){var o=i(this).attr("href");"#"!==o&&void 0!==o&&(document.location=o)}),i(document).on("change","#action-filter-top",function(e){var o=i(this),o="-1"===o.val()?"#":o.find(":selected").data("filter-link");void 0!==o&&i(".wpglobus-plus-wpglobeditor-filter-button").attr("href",o)}),i(document).on("click",".wpglobus-plus-wpglobeditor-filter",function(e){var o=i(this).data("filter");""!=o&&(i("."+o).hasClass("filtered")?i(".wpglobeditor-item").removeClass("hidden filtered"):(i(".wpglobeditor-item").addClass("hidden"),i("."+o).removeClass("hidden").addClass("filtered")))}),i(document).on("click","#wpglobus-plus-add-item",function(e){var o=i("#wpglobus-plus-skeleton tbody tr").clone();o.removeClass("hidden"),i("#wpglobus-plus-editor-items tbody .no-items").hide(),i("#wpglobus-plus-editor-items tbody").append(o)}),i(document).on("click",".wpglobus-plus-action-ajaxify",function(e){e.preventDefault();e=i(this);"remove"==e.data("action")&&e.parents("tr").fadeToggle("slow"),d.order={},d.order.action=WPGlobusPlusEditor.module+"-"+e.data("action"),d.order.module=WPGlobusPlusEditor.module,d.order.page=e.data("page"),d.order.key=e.data("key"),d.ajax(d.order).done(function(e){}).fail(function(e){}).always(function(e,o){})}),i(document).on("change",".wpglobus-plus-ajaxify",function(e){var l=i(this),o=l.parents("tr");d.order={},d.order.action=WPGlobusPlusEditor.module+"-"+l.data("action"),d.order.module=WPGlobusPlusEditor.module,d.order.page=o.find("input.page").val(),d.order.element=o.find("input.element").val(),d.order.key=l.data("key"),""!=d.order.page&&""!=d.order.element&&d.ajax(d.order).done(function(e){var o=l.parents("tr.wpglobeditor-item"),t=d.filterClass.replace("{{page}}",e.order.page.replace(".","-")),e=o.hasClass("filtered")?" filtered":"";""==e&&0<i(".filtered").length&&(e=" filtered"),o.removeClass().addClass("wpglobeditor-item "+t+e),o.find(".wpglobus-plus-wpglobeditor-filter").attr("data-filter",t)}).fail(function(e){}).always(function(e,o){})})},ajax:function(e,o){return i.ajax({beforeSend:function(){void 0!==o&&o()},type:"POST",url:ajaxurl,data:{action:WPGlobusPlusEditor.process_ajax,order:e},dataType:"json"})}};WPGlobusPlusEditor=i.extend({},WPGlobusPlusEditor,d),WPGlobusPlusEditor.init()}(jQuery);