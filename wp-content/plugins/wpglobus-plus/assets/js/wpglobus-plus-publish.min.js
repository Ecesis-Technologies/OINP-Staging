!function(n){"use strict";var c;"undefined"!=typeof WPGlobusPlusPublish&&(c={option:{},statusBoxDelta:0,init:function(t){c.option=n.extend(c.option,t),this.handlePostStatus()},getParam:function(t){return void 0===t?WPGlobusPlusPublish.data:WPGlobusPlusPublish.data[t]},getPostId:function(){return c.getParam("post_id")},handlePostStatus:function(){var l=[];n.each(WPGlobusPlusPublish.data.statuses,function(t,s){l[t]="wpglobus-status-"+s}),l=l.join(" "),n(".wpglobus-pub-language").each(function(t,s){var a=n(this).data("language"),u=n(this).data("status");n("#wpglobus-pub-"+a+" .wpglobus-status-"+u).addClass("wpglobus-pub-current-status")}),n(document).on("mouseenter mouseleave",".wpglobus-pub-language",function(t){var s=n(this).data("language");"mouseenter"==t.type?(n(".wpglobus-pub-status").addClass("hidden"),n("#wpglobus-pub-"+s).removeClass("hidden"),c.statusBoxDelta=t.screenY):"mouseleave"==t.type&&0!=c.statusBoxDelta&&t.screenY-c.statusBoxDelta<0&&n(".wpglobus-pub-status").addClass("hidden")}),n(document).on("mouseleave",".wpglobus-pub-status",function(t){n(".wpglobus-pub-status").addClass("hidden")}),n(document).on("click",".wpglobus-pub-status li",function(t){var s,a=n(this),u=a.find(".wpglobus-spinner"),e=a.data("language");a.hasClass("wpglobus-pub-current-status")||((s={action:"set_status"}).post_id=WPGlobusPlusPublish.data.post_id,s.language=e,s.status=a.data("status"),c.ajax(s,function(){u.css("visibility","visible")}).done(function(t){"ok"==t.result&&(n("#wpglobus-pub-"+e+" li").removeClass("wpglobus-pub-current-status"),a.addClass("wpglobus-pub-current-status"),n(".wpglobus-pub-selector-"+e).removeClass(l).addClass("wpglobus-status-"+a.data("status")),n(".wpglobus-pub-selector-"+e).data("status",t.status))}).fail(function(t){}).always(function(t,s){u.css("visibility","hidden")}))})},ajax:function(t,s){return n.ajax({beforeSend:function(){"function"==typeof s&&s()},type:"POST",url:ajaxurl,data:{action:WPGlobusPlusPublish.data.process_ajax,order:t},dataType:"json"})},postStatus:null,setStatus:function(t,s){null===c.postStatus&&(c.postStatus=WPGlobusPlusPublish.data.postStatus),c.postStatus[s]=t},getStatus:function(t){return null===c.postStatus&&(c.postStatus=WPGlobusPlusPublish.data.postStatus),void 0===t?c.postStatus:c.postStatus[t]},dbUpdateStatus:function(t,s){t={action:"set_status",post_id:WPGlobusPlusPublish.data.post_id,language:s,status:t};c.ajax(t).done(function(t){t.result}).fail(function(t){}).always(function(t,s){})},getComponent:function(t){var s=wp.element.useState,a=wp.element.useEffect,u=wp.element.useRef,e=wp.element.createElement;let{className:l="",style:n="",title:o="",language:i=""}=t;const[d,p]=s(c.getStatus(i)),b=u(!1);a(()=>{b.current&&c.dbUpdateStatus(d,i),b.current=!0},[d]);let r="components-pubstatus";""!==l&&(r+=" "+l,"draft"===c.getStatus(i)&&(r+=" draft"));return e("div",{className:r,style:n,onClick:t=>{var s=t.target.dataset.language;-1===t.target.className.indexOf("draft")?(t.target.classList.add("draft"),c.setStatus("draft",s),p("draft")):(t.target.classList.remove("draft"),c.setStatus("publish",s),p("publish"))},title:o,"data-language":i},d)}},(WPGlobusPlusPublish=n.extend({},WPGlobusPlusPublish,c)).init())}(jQuery);