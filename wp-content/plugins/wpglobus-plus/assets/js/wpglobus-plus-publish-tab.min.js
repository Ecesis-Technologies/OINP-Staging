!function(c){"use strict";var s;"undefined"!=typeof WPGlobusPlusPublishTab&&(s={selectSelector:"#wpglobus-plus-publish-languages",selectID:"wpglobus-plus-publish-languages",bulkStartButtonSelector:".wpglobus-plus-publish-bulk-start",languageIDs:[],selectedLanguageIDs:[],parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},init:function(){"post-action"===WPGlobusPlusPublishTab.data.section?(s.postAction(),setTimeout(function(){s.setCSS()},1e3)):"single-action"===WPGlobusPlusPublishTab.data.section&&setTimeout(function(){s.singleAction()},500)},singleAction:function(){c(".about-wrap .feature-section .col").css({"margin-top":0});var n=c(".item-two"),u=c(".wpglobus-plus-publish-single-action_link");u.removeAttr("href");var o={mask:"",value:""},i={mask:"",value:""};c(".wpglobus-select").on("change",function(e){var t=c(this),l=t.attr("id"),a=t.data("mask"),s=t.val(),t="";"language"===l?(o.mask=a,o.value=s):"post_type"===l&&(i.mask=a,i.value=s),t=(t=WPGlobusPlus.publish_action_links["single-action"].replace(o.mask,o.value)).replace(i.mask,i.value),o.mask!==o.value&&i.mask!==i.value?(u.attr("href",t),n.removeClass("inactive")):(u.removeAttr("href"),n.addClass("inactive")),u.text(t)})},setCSS:function(){var e=c("img.module-publish-metabox-actions");1==e.length&&e.css({display:"block"})},postAction:function(){c(s.selectSelector).select2({placeholder:"Select language(s)",width:"600px",maximumSelectionLength:-1,escapeMarkup:function(e){return e}}),setTimeout(function(){var e=document.getElementById(s.getSelectID());s.parseBool(e)&&(e=e.options,s.languageIDs=c.map(e,function(e){return e.value}))},500),s.addListeners()},getSelectID:function(){return s.selectID},getLanguageIDs:function(){return s.languageIDs},getSelectedLanguageIDs:function(){return s.selectedLanguageIDs},addListeners:function(){c(document).on("click",".wpglobus-plus-publish-languages-add-all",function(e){c(s.selectSelector).val(s.languageIDs).trigger("select").trigger("change")}),c(document).on("click",".wpglobus-plus-publish-languages-delete-all",function(e){c(s.selectSelector).val([]).trigger("change")}),c(s.selectSelector).on("change",function(e){var t;void 0===e.val?(t=c(s.selectSelector+" option:selected"),s.selectedLanguageIDs=c.map(t,function(e){return e.value})):s.selectedLanguageIDs=e.val,0==s.selectedLanguageIDs.length?c(s.bulkStartButtonSelector).addClass("hidden"):c(s.bulkStartButtonSelector).removeClass("hidden")}),c('form[name="wpglobus-publish-form"]').submit(function(e){c(s.bulkStartButtonSelector).addClass("hidden");var t=c(this).find('input[name="post-id"]').val(),l=s.getSelectedLanguageIDs(),a=c('form[name="wpglobus-publish-form"] input[name="action-link"]').val();return a=(a=a.replace("{{post_id}}",t)).replace("{{language}}",l),location=a,!1})}},(WPGlobusPlusPublishTab=c.extend({},WPGlobusPlusPublishTab,s)).init())}(jQuery);