!function(d){"use strict";var f;"undefined"!=typeof WPGlobusSlug&&(f={option:{},parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},isPostL10nObsolete:function(){return f.parseBool(WPGlobusSlug.postL10n_obsolete)},init:function(e){f.option=d.extend(f.option,e),this.attachListeners()},attachListeners:function(){d(document).on("wpglobus_post_name_full",function(e,n){return n.language==WPGlobusCoreData.default_language?n.postnamefull:n.postnamefull+"-"+n.language})},ajax:function(e,n){return d.ajax({beforeSend:function(){n()},type:"POST",url:ajaxurl,data:{action:WPGlobusSlug.data.process_ajax,order:e},dataType:"json"})},editPermalink:function(n,t){var e,l=0,a=d("#editable-post-name-"+t),o=a.html(),s=d("#post_name_"+t),u=s.val()||"",i=d("#edit-slug-buttons-"+t),c=i.html(),r=d("#editable-post-name-full-"+t),p={};for(f.isPostL10nObsolete()?(p.ok=WPGlobusSlug.i18n.ok,p.cancel=WPGlobusSlug.i18n.cancel):(p.ok=postL10n.ok,p.cancel=postL10n.cancel),r.find("img").replaceWith(function(){return this.alt}),r=r.html(),d("#view-post-btn-"+t).hide(),i.html('<a href="#" class="wpglobus-save button button-small" data-language="'+t+'">'+p.ok+'</a> <a class="wpglobus-cancel" href="#">'+p.cancel+"</a>"),i.children(".wpglobus-save").click(function(){var e=a.children("input").val();return e==d("#editable-post-name-full-"+t).text()?i.children(".wpglobus-cancel").click():f.ajax({language:t,action:"wpglobus-sample-permalink",post_id:n,new_title:d("#title_"+t).val(),new_slug:e,samplepermalinknonce:d("#samplepermalinknonce").val(),post_name_full:d("#editable-post-name-full").text(),slug_type:WPGlobusSlug.data.slug_type},function(){}).done(function(e){var n=d("#edit-slug-box-"+t);n.html(e),n.hasClass("hidden")&&n.fadeIn("fast",function(){n.removeClass("hidden")}),i.html(c),d("#view-post-btn-"+t).show(),d(document).trigger("wpglobus-sample-permalink:done",[e,t])}).fail(function(e){}).always(function(e,n){}),!1}),i.children(".wpglobus-cancel").click(function(){return d("#view-post-btn-"+t).show(),a.html(o),i.html(c),s.val(u),!1}),e=0;e<r.length;++e)"%"==r.charAt(e)&&l++;p=l>r.length/4?"":r,a.html('<input type="text" id="new-post-slug-'+t+'" value="'+p+'" />').children("input").keypress(function(e){e=e.keyCode||0;return 13==e?(i.children(".wpglobus-save").click(),!1):27==e?(i.children(".wpglobus-cancel").click(),!1):void 0}).keyup(function(){s.val(this.value)}).focus()}},(WPGlobusSlug=d.extend({},WPGlobusSlug,f)).init())}(jQuery);